# VKPostSearcher
Утилита позволяет найти все посты и комментарии определённого пользователя в заданных группах.
Потеряли интересный комментарий, но помните id отправителя? Или помните только фрагмент текста? Данная утилита должна помочь.

# Краткая инструкция по запуску без сборки
1. Необходима установленная Java 8+ версии и файлы: `input.txt`, `VKPostSearcher.jar`, `start.bat`, `start -skip.bat`, `start -skip -friends.bat`, располагающиеся в одной папке, из которой будет производиться запуск.
2. Содержимое файла `input.txt`:
    * Первая строка: id интересующего пользователя.
    * Вторая строка: дата, начиная с которой будут отображаться сообщения. Например, 01.01.2016 означает поиск сообщений, начиная с 1 января 2016 года.
    * Третья строка: сервисный ключ доступа (можно получить, создав приложение в vk).
    * Четвертая строка: количество потоков, используемых для скачивания постов (например, 10).
    * Пятая строка: количество потоков, используемых для скачивания комментариев и лайков (например, 50).
    * Последующие строки: список сообществ. По одной ссылке на сообщество на строке. Сообщества должны быть публичными страницами либо открытыми группами.
    * Список обсуждений в формате https://vk.com/topic-xxx_yyy.
3. Запустить `start.bat`: начнёт выполняться поиск сообщений по заданным параметрам. Появится файл `vkgroups.s3db`. Все данные сохраняются в БД SQLite. Далее выполнится поиск. В поиске участвуют:
    * Посты, отправленные пользователем.
    * Посты, подписанные именем пользователя и отправленные от имени сообщества.
    * Комментарии, отправленные пользователем.
    * Комментарии, адресованные пользователю.
    * Посты, которые пользователь лайкнул.
    * Комментарии в обсуждениях, отправленные пользователем.
4. Вся найденная информация записывается в файлы `output_by_date.txt`, `output_by_group.txt`.
5. (_Опционально_) `start -skip.bat`: начнётся сразу поиск по готовой базе без парсинга.
6. (_Опционально_) `start -skip -friends.bat`: выполнить поиск для друзей пользователя (список друзей должен быть открыт).
6. (_Опционально_) Вместо id пользователя можно задать регулярное выражение для поиска всех постов на стенах и комментариев в обсуждениях по совпадению.
6. (_Экспериментальная фича_) Запуск с дополнительным ключом `-private` позволит парсить приватные группы. Для этого вместо сервисного ключа доступа требуется задать ключ доступа пользователя. Работает медленно.

# Сборка
Выполнить команду `mvn clean install`. Будет создан файл _VKPostSearcher.jar_ в папке _target_.

# Прочее
Утилита [vk-post-inspector](https://github.com/iNomaD/vk-post-inspector) позволяет сканировать определённую запись в группе.
